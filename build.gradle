// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    repositories {
        google()
        mavenCentral()
        maven { url "https://jitpack.io" }
    }
    dependencies {
        classpath "com.android.tools.build:gradle:7.0.3"

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
        classpath 'com.github.kezong:fat-aar:1.3.8'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'
    }
    configurations.all {
        resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

task clean(type: Delete) {
    //清除项目编译缓存
    delete rootProject.buildDir
    //清除SDK整合module变编译缓存
    dependsOn(":onlineservicesdk:clean")
}

task buildOnlineKitSDK(dependsOn: clean) {
    group = "build os aar"

    dependsOn(":onlineservicesdk:assembleKit")

    doLast {
        copy {
            from "${project.projectDir}/onlineservicesdk/build/outputs/aar"
            include "*_release.aar"
            into "../../ti-net/clink-sdk/clink-appsdk/android/demo/TOSClientKitDemo/app/libs"
        }
    }
}

task buildOnlineLibSDK(dependsOn: clean) {
    group = "build os aar"

    dependsOn(":onlineservicesdk:assembleLib")

    doLast {
        copy {
            from "${project.projectDir}/onlineservicesdk/build/outputs/aar"
            include "*_release.aar"
            into "../../ti-net/clink-sdk/clink-appsdk/android/demo/TOSClientKitDemo/app/libs"
        }
    }
}


ext {


    // 版本号规则，拼接字符串必须为下划线，不可为横杠
    // 如为lib，则版本号末尾拼接"_lib"标识符
    // 如为kib，则版本号末尾拼接"_kit"标识符
    versionName = '1.7.18'

    groupId = 'com.github.ti-net-project'
    artifactId = 'OnlineSDK-Android'


    libVersionName = '1.7.20_lib'

}